
---
#  Professional WordPress
## by Brad Williams
---

 - loc 1045 - The mysql_error() function is a PHP library function that spits out the error generated by the last MySQL function called.

 - loc 1239 - Core files are all files in the wp-admin and wp-includes directories and the majority of the files in the root WordPress directory. The wp-content directory holds all of your custom files, including themes, plugins, and media. This directory contains the code that controls content manipulation and presentation in WordPress.

 - loc 1262 - The most important file in any WordPress installation is the wp-config.php file. This file contains all database connection settings, including the database name, username, and password, to access your MySQL database.

 - loc 1277 - Moving the wp-config.php out of the root WordPress directory is a good security measure, making it nearly impossible to potentially access this file from a web browser.

 - loc 1354 - define( 'WP_SITEURL', 'http://example.com/wordpress' );

 - loc 1356 - The WP_SITEURL option allows you to temporarily change the WordPress site URL. This does not alter the database option value for siteurl, but instead temporarily changes the value.

 - loc 1362 - This is a useful technique if you are building a WordPress website under a temporary development URL, such as new.example.com. You can simply remove these two options when you go

 - loc 1422 - A great debugging option is SAVEQUERIES. Activating this option saves all database queries into a global array that can be displayed on your page.

 - loc 1427 - define( 'SAVEQUERIES', true ); To display the query array in your theme, add the following code to any theme template file to view: if ( current_user_can( 'manage_options' ) ) {   global $wpdb;   print_r( $wpdb->queries );}

 - loc 1448 - define( 'WP_MEMORY_LIMIT', '64M' );

 - loc 1516 - There is a PHP function to view all constants currently set on your installation: print_r( @get_defined_constants() );

 - loc 1519 - To activate SSL on login, add the FORCE_SSL_LOGIN option like so: define( 'FORCE_SSL_LOGIN', true ); You can also force all admin pages to use SSL. This is activated with the FORCE_SSL_ADMIN option, like so: define( 'FORCE_SSL_ADMIN', true );

 - loc 1553 - A great resource for learning about wp-config.php options is the Codex: http://codex.wordpress.org/Editing_wp-config.php

 - loc 1588 - pretty permalinks are controlled by the mod_rewrite Apache module.

 - loc 1673 - php_flag display_startup_errors offphp_flag display_errors offphp_flag html_errors offphp_flag  log_errors onphp_value error_log /public_html/php-errors.log This enables error logging but suppresses any error messages from displaying. Again this is a perfect setup for a production environment because you don’t want errors publicly displayed.

 - loc 1710 - Plugins are stored in the wp-content/plugins directory.

 - loc 1760 - The W3 Total Cache plugin (https://wordpress.org/plugins/w3-total-cache/) creates a /wp-content/cache directory to store all of the cached pages created for your website. A cached page is simply a fully generated page on your website saved as a static HTML file.

 - loc 1769 - The most popular image gallery plugin, NextGen Gallery (http://wordpress.org/extend/plugins/nextgen-gallery/), creates a /wp-content/gallery directory to store all of the images uploaded to your NextGen image galleries. Each gallery created is a subdirectory under /gallery.

 - loc 1985 - You set your PHP error level in the php.ini file.

 - loc 1986 - Set your error reporting directive to be E_ALL and E_STRICT,

 - loc 2016 - Essentially, he changes the wp-config.php file to look for an overriding set of credentials that exist on his development machine only. He then ignores this wp-config-local.php file in his source code control so that each developer can have his or her own controlled local credentials and so that this file never makes it to production.

 - loc 2134 - For this process you use the wp-DBManager plugin by Lester Chan available online at https://wordpress.org/plugins/wp-dbmanager/. This plugin allows you to make database backups and also perform SQL queries on the data.

 - loc 2226 - PHPDoc is a standardized method of describing a function’s usage in PHP comment form.

 - loc 2358 - The pluggable functions file lets you override certain core functions of WordPress.

 - loc 2480 - The official Function Reference is located at http://codex.wordpress.org/Function_Reference

 - loc 2528 - An example core WordPress shortcode is [gallery]. Adding [gallery] to your post automatically displays all images uploaded to that post in a gallery style.

 - loc 2611 - The biggest benefit to the Code Reference over the Codex is accuracy. The Code Reference is automatically generated from the WordPress core files. This ensures all content in the Code Reference is completely accurate and always up to date with the latest version of WordPress.

 - loc 2661 - The Loop refers to how WordPress determines what content (posts, pages, or custom content) to display on a page you are visiting.

 - loc 2661 - The Loop refers to how WordPress determines what content (posts, pages, or custom content) to display on a page you are visiting. The Loop can display a single piece of content or a group of posts and pages that are selected and then displayed by looping through the content; thus, it’s called the Loop.

 - loc 2741 - If you want to explore the core for the gory details of SQL generation, most of the query-to-request parsing is done in wp-includes/query.php, and the bulk of the JOIN work is set up in wp-includes/taxonomy.php.

 - loc 2751 - content, WordPress will insert a LIKE modifier into the WHERE clause that contains the post name. For example, if a user supplies the URL http://example.com/2015/lecter, but you have no posts with the title “Lecter,” the LIKE clause will match any posts that start with “Lecter,” such as “Lecter Fish IPA Review.”

 - loc 2751 - if an attempt to load a page by name fails to return any content, WordPress will insert a LIKE modifier into the WHERE clause that contains the post name. For example, if a user supplies the URL http://example.com/2015/lecter, but you have no posts with the title “Lecter,” the LIKE clause will match any posts that start with “Lecter,” such as “Lecter Fish IPA Review.”

 - loc 2752 - if a user supplies the URL http://example.com/2015/lecter, but you have no posts with the title “Lecter,” the LIKE clause will match any posts that start with “Lecter,” such as “Lecter Fish IPA Review.”

 - loc 2786 - Keep in mind that a Loop is effectively a database query to select content and then an iteration over the selection to display

 - loc 2824 - Calling the_post() in turn calls the setup_postdata() function to set up the per-post metadata such as the author and tags of the content you are displaying

 - loc 2827 - Specifically calling the_post() has the side effect of setting up the global $post variable used by most of the template tags described later on, and then advances to the next post in the list.

 - loc 2869 - PHP functions used in your WordPress theme templates to display Loop content are called template tags.

 - loc 2929 - You can also use the Codex for a detailed description of the template tag you are working with, in this case http://codex.wordpress.org/Template_Tags/the_title

 - loc 3100 - The pre_get_posts hook accepts the global WordPress query by reference, which enables you to modify the query variables prior to having the query run.

 - loc 3131 - The query_posts() function is used to easily modify the content returned for the default WordPress Loop. Specifically, you can modify the content returned in $wp_query after the default database query has executed, fine-tune the query parameters, and re-execute the query using query_posts().

 - loc 3201 - Although you may see older code using get_posts() or query_posts() constructions, WP_Query is the preferred approach and should be the heart of custom loop syntax.

 - loc 3213 - The first method for resetting post data is wp_reset_data(). This function actually restores the global $post variable to the current post in the main query. This is the preferred method when using WP_Query to create custom Loops.

 - loc 3252 - It’s a good practice to add wp_reset_query() after using query_posts() in your Loop to ensure you do not run into problems down the road.

 - loc 3377 - You saw how the key first step in the Loop is calling the_post(). Once invoked, you will have access to all of the data in WordPress specific to the post being displayed. This data is stored in the global $post variable. The $post variable stores the post data of the last post displayed on the page. So if your Loop displays ten posts, the $post variable will store post data for the tenth post displayed.

 - loc 3415 - $authordata is a global variable that stores information about the author of the post being displayed.

 - loc 3419 - The $authordata variable is created when setup_postdata() is called during the_post() function call in the Loop.

 - loc 3432 - The $current_user global variable stores information on the currently logged-in user.

 - loc 3455 - Rather than calling this global variable directly, there’s a handy function available called wp_is_mobile(). This function detects if the user is on a mobile device.

 - loc 3461 - WordPress also stores what type of web server the website is hosted on using the $is_IIS and $is_apache global variables.

 - loc 3470 - Generally speaking, template tags should be used whenever they can be. There will be certain instances where a template tag will not be available. In this case, global variables can be substituted to access the information you need.

 - loc 3470 - Generally speaking, template tags should be used whenever they can be. There will be certain instances where a template tag will not be available. In this case, global variables can be substituted to access the information you need. Also, global variables are great for retrieving unfiltered data, meaning the values will bypass any plugin, altering what would normally be used against the content and giving you the original value to work with.

 - loc 3485 - wp_list_pages()—Displays a list of pages as links wp_list_categories()—Displays a list of categories as links wp_tag_cloud()—Displays a tag cloud from all tags get_permalink()—Returns the permalink of a post next_posts_link()—Link to display previous posts previous_posts_link()—Link to display next posts

 - loc 3585 - The default installation of WordPress contains 11 database tables. WordPress prides itself on being very lightweight and the database is the foundation for this.

 - loc 3608 - There is one caveat to this, which has to do with post revisions, attachments, and custom post types. Each one of these entries is saved as a new record in the wp_posts table so they each gets its own unique ID, which means your published post IDs may not be sequential.

 - loc 3636 - To retrieve all of your website content, you’ll be accessing the wp_posts table. This table stores all of your posts, pages, attachments, revisions, and more. Attachment records are stored in this table, but the actual attachments are not. They are physically stored on your hosting server as a standard file.

 - loc 3637 - Attachment records are stored in this table, but the actual attachments are not. They are physically stored on your hosting server as a standard file.

 - loc 3654 - One very important field is the post_status field. Currently, eight different post statuses are defined in WordPress: publish—A published post or page. inherit—A post revision. pending—Post that is pending review by an administrator or editor. private—A private post. future—A post scheduled to publish at a future date and time. draft—A post still being created that has not been published. auto-draft—A post revision that WordPress saves automatically while you are editing. trash—Content is in the trash bin and can still be recovered.

 - loc 3684 - The comment_author field stores the name of the commenter. If the comment is a pingback or trackback, it will contain the name of the post that sent the ping.

 - loc 3709 - To find all of the posts in the “scary stories” category, WordPress first finds the identifier for this term and taxonomy pair, selects the appropriate rows from the wp_term_relationships table, and then does a JOIN on the wp_posts and the selected rows from the relationships table: That last JOIN is SQL-ese for “extract all of the posts with identifiers in this list”

 - loc 3724 - WordPress features an object class with method functions for working with the database directly. This database class is called wpdb and is located in wp-includes/wp-db.php. Any time you are querying the WordPress database in PHP code, you should use the wpdb class. The main reason for using this class is to allow WordPress to execute your queries in the safest way possible.

 - loc 3733 - One of the most important functions in the wpdb class is the prepare() function. This function is used for escaping variables passed to your SQL queries. This is a critical step in preventing SQL injection attacks on your website.

 - loc 3740 - $wpdb->prepare( $query, $value1 ); The $query parameter is the database query you want to run. The $value1 parameter is the first value you want to replace in the query.

 - loc 3771 - Although the query() function allows you to execute any SQL query on the WordPress database, other database object class functions are more appropriate for SELECT queries. For instance, the get_var() function is used for retrieving a single variable from the database:

 - loc 3778 - Although only one scalar variable is returned, the entire result set of the query is cached.

 - loc 3784 - To retrieve an entire table row, you’ll want to use the get_row() function.

 - loc 3807 - The WordPress database class also features specific functions for UPDATE, INSERT, and DELETE statements. These three functions eliminate the need for custom SQL queries because WordPress will create them for you based on the values passed into the function.

 - loc 3827 - The update() function works very similarly to the insert() function, except you also need to set the $where clause and $where_format variables so WordPress knows which records to update and how to format: $wpdb->update( $table,

 - loc 3827 - The update() function works very similarly to the insert() function, except you also need to set the $where clause and $where_format variables so WordPress knows which records to update and how to format: $wpdb->update( $table, $data, $where, $format, $where_format );

 - loc 3872 - The show_errors() function must be called directly before you execute a query. The print_error() function must be called directly after you execute a query. If there are any errors in your SQL statement, the error messages are displayed. You can also call the $wpdb->hide_errors() function to hide all MySQL errors, or call the $wpdb->flush() function to delete the cached query results.

 - loc 3884 - Another very powerful database variable is the $queries variable. This stores all of the queries run by WordPress. To enable this variable, you must first set the constant value SAVEQUERIES to true in your wp-config.php file.

 - loc 3895 - Remember to disable the SAVEQUERIES constant option when you are finished viewing

 - loc 3895 - Remember to disable the SAVEQUERIES constant option when you are finished viewing queries because storing all queries can also slow down load times.

 - loc 3945 - If you ever need to change your website’s domain, you can run a query to update these two values like so: UPDATE wp_optionsSET option_value = 'http://yournewdomain.com'WHERE option_name IN ('siteurl','home') Once this query runs, your website will instantly run under the new domain. Remember that this only updates the website’s domain in WordPress. Attachment URLs in posts and pages will also need to be updated to point to the new domain.

 - loc 4030 - WordPress has five predefined post types in a default installation: Post—Posts or articles generally ordered by date Page—Hierarchical static pages of content Attachment—Media uploaded to WordPress and attached to post type entries, such as images and files Revision—A revision of a post type used as backup and can be restored if needed Nav Menus—Menu items added to a nav menu using WordPress’s menu management feature

 - loc 4046 - Remember that custom post types can be absolutely anything, not just public-facing pieces of content. For example, you can set up a custom post type as an error log to track errors in your application.

 - loc 4079 - You should always use the init action hook when registering your custom post types.

 - loc 4384 - Taxonomy can be hierarchical (that is, categories and subcategories), but it is not required. Tags are a perfect example of a taxonomy without a hierarchy.

 - loc 4386 - By default, WordPress comes loaded with two taxonomies: Category—A bucket for grouping similar posts together Tag—A label attached to a post

 - loc 4835 - You’ll want to utilize some important functions when creating plugins. The first of these is called the register_activation_hook() function. This function is executed when your plugin is activated in the WordPress Plugins screen.

 - loc 4835 - You’ll want to utilize some important functions when creating plugins. The first of these is called the register_activation_hook() function. This function is executed when your plugin is activated in the WordPress Plugins screen. The function accepts two parameters: the path to the main plugin file and the function to execute when the plugin is activated.

 - loc 4947 - You can see that you pass the __FILE__ PHP constant to the plugin_dir_path() function. This returns the full local server path to your plugin directory:

 - loc 4959 - To determine the full URL to any file in your plugin directory, you’ll use the plugins_url() function

 - loc 5025 - Verifying that the nonce is valid is as simple as calling the wp_verify_nonce() function and passing it your unique nonce action and name that you defined earlier. If the nonce secret key does not match the secret key created on your form, WordPress will stop processing the page and issue an error message. This primarily protects it from cross-site request forgery, or CSRF.

 - loc 5134 - Any time you need to allow users to input HTML code, you should always use the wp_kses() function to verify that only acceptable HTML tags and attributes are allowed.

 - loc 5153 - Two types of hooks can be used: actions and filters. Action hooks are triggered by events in WordPress. For example, an Action hook is triggered when a new post is published. Filter hooks are used to modify WordPress content before saving it to the database or displaying it to the screen. For example, a Filter hook is available for the content of the post or page. This means you can alter that content after it is retrieved from the database but before it is displayed in your browser.

 - loc 5303 - Two functions are available for creating options: add_option() and update_option().

 - loc 5308 - The first parameter you send to the add_option() function is the name of your option. This is a required field and must be unique from all other options saved in WordPress, including from other plugins.

 - loc 5316 - Generally, the update_option() function is used for both adding and updating options in plugins.

 - loc 5322 - The only required field for get_option() is the name of the option you want to retrieve.

 - loc 5322 - The only required field for get_option() is the name of the option you want to retrieve. If the option exists, it is returned to display or it is stored in a variable. If the option doesn’t exist, the function returns FALSE.

 - loc 5589 - need to register one setting called prowp_setting_values. The first parameter you pass is the option group. In this example, you are saving your options in the reading group with the rest of the reading options.

 - loc 5590 - The first parameter you pass is the option group. In this example, you are saving your options in the reading group with the rest of the reading options.

 - loc 5824 - The first step in creating your own widget is to use the appropriate hook to initialize your widget. This hook is called widgets_init and is triggered right after the default WordPress widgets have been registered:

